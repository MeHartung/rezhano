{% extends "@Store/Checkout/step.html.twig" %}

{% block breadcrumbs %}
    <div class="section-title">
        <div class="breadcrumbs">
            <a href="{{ url('homepage') }}" class="breadcrumbs__item">Главная страница</a>
            <span class="breadcrumbs__divide"></span>
            <a class="breadcrumbs__item breadcrumbs__item_active">Корзина</a>
        </div>
        <span class="section-title__text section-title__text_in-product">Корзина</span>
    </div>
{% endblock %}

{% block form %}

    {% if items is not empty %}

    <div class="cards-container">
        <div class="cards-container__header">
            <div class="cards-container__item cards-container__item_header"></div>
            <div class="quantity-wrap quantity-wrap_header"><span>Кол-во</span></div>
            <div class="cards-container__location cards-container__location_header"><span>Местонахождение</span></div>
            <div class="cards-container__price cards-container__price_header"><span>Цена</span></div>
        </div>

        {% for item in items %}
            <div class="cards-container__wrap">

                <div class="cards-container__item">
                    <a href="{{ path('product', { slug: item.product.slug }) }}" class="cards-container__item-image"
                         style="background: {% if (image_url(item.product.mainImage)) %} url('{{ image_url(item.product.mainImage) }}') {% else %}  url('/images/no_photo.png'){% endif %}  center no-repeat; background-size: cover"></a>
                    <div class="cards-container__item-info">
                        <a href="{{ path('product', { slug: item.product.slug }) }}" class="item-info__title">{{ item.product.name }}</a>
                        <span class="item-info__title-aside">Артикул – {{ item.product.sku }}</span>
                    </div>
                </div>

                <div class="quantity-widget quantity-wrap">
                    <a class="quantity-control quantity-control__down"></a>
                    <input class="quantity-control__input" value="{{ item.quantity }}" type="text">
                    <a class="quantity-control quantity-control__up"></a>
                    {#<span class="quantity-balance">всего {{ item.product.availableStock }} шт.</span>#}
                </div>

                {#<div class="cards-container__location">#}
                    {#{% if stockManager.getAvailableWarehouse(item.product) %}#}
                        {#{{ stockManager.getAvailableWarehouse(item.product).city.name }}#}
                    {#{% endif %}#}
                {#</div>#}
                <div class="cards-container__price">{{ item.price|price }}</div>
                <div class="cards-container__controls">
                    <a href="{{ path('cart_remove', { id: item.id }) }}" class="button button-remove-from-favorites"></a>
                </div>

                <div class="cards-container__amount-total">
                    <div class="total-value">
                        Сумма:
                        <span class="total-value__payment">{{ item.cost|price }}</span>
                    </div>
                </div>

            </div>
        {% endfor %}
    </div>

    <button class="white">
        <a href="{{ path('cart_reset') }}"><span>Очистить корзину</span></a>
    </button>

    {% else %}
       <div class="cart-empty">
            <div class="cart-empty__wrap">
                <div class="cart-empty__image"></div>
                <div class="cart-empty__title">Корзина пуста</div>
                <a href="{{ url('catalog_index') }}" class="button">В каталог товаров</a>
            </div>
       </div>
    {% endif %}
{% endblock %}